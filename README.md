# @KhantyLearnBot
*–ú–æ—ö—â”ô”à –±–æ—Ç* - –±–æ—Ç –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è –∫–∞–∑—ã–º—Å–∫–æ–≥–æ –¥–∏–∞–ª–µ–∫—Ç–∞ —Ö–∞–Ω—Ç—ã–π—Å–∫–æ–≥–æ —è–∑—ã–∫–∞ –∏ —Ñ–æ–ª—å–∫–ª–æ—Ä–∞ –Ω–∞—Ä–æ–¥–∞ —Ö–∞–Ω—Ç—ã

---

## üöÄ –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

* **–ß—Ç–µ–Ω–∏–µ —Å–∫–∞–∑–æ–∫:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —á–∏—Ç–∞—Ç—å –∏–ª–∏ —Å–ª—É—à–∞—Ç—å —Ö–∞–Ω—Ç—ã–π—Å–∫–∏–µ —Å–∫–∞–∑–∫–∏ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä—É—Å—Å–∫–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞.
* **–°–ª–æ–≤–∞—Ä–∏–∫**: –ï–¥–∏–Ω—ã–π —Ä–∞–∑–¥–µ–ª –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è —è–∑—ã–∫–∞. –í–∫–ª—é—á–∞–µ—Ç:
  * **–õ–µ–∫—Å–∏–∫–∞:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–ª–æ–≤ –∏–∑ —Å–∫–∞–∑–æ–∫ –ø–æ —Ç–µ–º–∞—Ç–∏–∫–∞–º —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **–≥–∏–±—Ä–∏–¥–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞** (—Ä—É—á–Ω–æ–π —Å–ª–æ–≤–∞—Ä—å + –Ω–µ–π—Ä–æ—Å–µ—Ç—å).
  * **–ì—Ä–∞–º–º–∞—Ç–∏–∫–∞:** –û–±—â–∞—è –≥—Ä–∞–º–º–∞—Ç–∏–∫–∞, —Å–æ–±—Ä–∞–Ω–Ω–∞—è –∏–∑ –≤—Å–µ—Ö —Å–∫–∞–∑–æ–∫.
  * **–ê–ª—Ñ–∞–≤–∏—Ç:** –ü—Ä–æ—Å–º–æ—Ç—Ä –∏ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–Ω–æ—à–µ–Ω–∏—è –±—É–∫–≤ —Ö–∞–Ω—Ç—ã–π—Å–∫–æ–≥–æ –∞–ª—Ñ–∞–≤–∏—Ç–∞.
* **–ü—Ä–æ–≥—Ä–µ—Å—Å:** –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —á—Ç–µ–Ω–∏—è —Å–∫–∞–∑–æ–∫ –∏ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤.
* **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:** –¢–µ—Å—Ç—ã –Ω–∞ –∑–Ω–∞–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∞.

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω –ø–æ –º–æ–¥—É–ª—å–Ω–æ–º—É –ø—Ä–∏–Ω—Ü–∏–ø—É, –≥–¥–µ –∫–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å—Ç—Ä–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—É—é –∑–∞–¥–∞—á—É.
```
.
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ config.py         # –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏—è, callback_data, –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö.
‚îÇ   ‚îú‚îÄ‚îÄ db/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ database.py       # –ö–ª–∞—Å—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å SQLite (–ø—Ä–æ–≥—Ä–µ—Å—Å, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏).
‚îÇ   ‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tale_handlers.py    # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–∫–∞–∑–æ–∫, –ª–µ–∫—Å–∏–∫–∏, –∞–ª—Ñ–∞–≤–∏—Ç–∞ –∏ –æ–±—â–µ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏.
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user_commands.py    # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥ /start, /menu –∏ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é.
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ progress_handler.py # –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /progress.
‚îÇ   ‚îú‚îÄ‚îÄ middleware/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ dependencies.py   # –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–µ –ü–û –¥–ª—è –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (DI).
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ classifier.py     # –ì–∏–±—Ä–∏–¥–Ω—ã–π –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä –¥–ª—è —Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–ª–æ–≤–∞—Ä—è (Word2Vec, PyTorch, —Ä—É—á–Ω–æ–π —Å–ª–æ–≤–∞—Ä—å).
‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ       ‚îú‚îÄ‚îÄ keyboards.py      # –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ inline-–∫–ª–∞–≤–∏–∞—Ç—É—Ä (–º–µ–Ω—é, –ø–∞–≥–∏–Ω–∞—Ü–∏—è).
‚îÇ       ‚îî‚îÄ‚îÄ helpers.py        # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (—Å–∂–∞—Ç–∏–µ/–∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, —Ä–∞–∑–±–∏–≤–∫–∞ –¥–ª–∏–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π).
‚îú‚îÄ‚îÄ main.py                   # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫ –±–æ—Ç–∞ (aiogram).
‚îú‚îÄ‚îÄ .env                      # –§–∞–π–ª —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è (TELEGRAM_BOT_TOKEN).
‚îî‚îÄ‚îÄ user_progress.db          # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLite.
```

---

## ‚öôÔ∏è –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏ –∏ –∏—Ö –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ

### `main.py`

–≠—Ç–æ **–æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –∑–∞–≥—Ä—É–∑–∫–∏** –ø—Ä–æ–µ–∫—Ç–∞. –û–Ω –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞:

* –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –±–æ—Ç–∞ –∏ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞ (`Bot`, `Dispatcher`).
* –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Ä–æ—É—Ç–µ—Ä–æ–≤ (`tale_handlers`, `user_commands`, `progress_handler`).
* –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é `Database` –∏ –ø–µ—Ä–µ–¥–∞—á—É –µ–µ —á–µ—Ä–µ–∑ **Dependency Injection** —Å –ø–æ–º–æ—â—å—é `DependencyMiddleware`.
* –ó–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–∞ `dp.start_polling(bot)`.

### `src/core/config.py`

–•—Ä–∞–Ω–∏—Ç –≤—Å–µ –∫–ª—é—á–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

* –ù–∞—Å—Ç—Ä–æ–π–∫–∞ **–ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏—è** (`logger`).
* –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è **`callback_data`** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `CALLBACK_LEXICON`, `CALLBACK_BACK_TO_VOCABULARY`).
* –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ JSON-—Ñ–∞–π–ª–æ–≤ (`fairytales.json`, `tests.json` –∏ —Ç.–¥.).

### `src/db/database.py`

–°–æ–¥–µ—Ä–∂–∏—Ç –∫–ª–∞—Å—Å `Database` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ª–æ–∫–∞–ª—å–Ω–æ–π –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö **SQLite**:

* –ú–µ—Ç–æ–¥—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü (`users`, `tale_progress`, `test_results`).
* –ú–µ—Ç–æ–¥—ã –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —á—Ç–µ–Ω–∏—è –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ç–µ—Å—Ç–æ–≤.
* –ú–µ—Ç–æ–¥ `get_user_progress` –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏.

### `src/handlers/tale_handlers.py`

–°–∞–º—ã–π –±–æ–ª—å—à–æ–π –º–æ–¥—É–ª—å, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π —Å–ª–æ–∂–Ω—É—é –ª–æ–≥–∏–∫—É –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞:

* –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –≤ –º–µ–Ω—é —Ç–µ–º (`handle_lexicon_pagination`).
* –õ–æ–≥–∏–∫–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞ –∏–∑ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å–ª–æ–≤ (`handle_lexicon_return_to_themes`).
* –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –≤—ã–≤–æ–¥–∞ —Å–∫–∞–∑–æ–∫, –∞–ª—Ñ–∞–≤–∏—Ç–∞, –ª–µ–∫—Å–∏–∫–∏ –∏ —Ç.–¥.
* –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `FSMContext` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `lexicon_page`, `lexicon_message_id`).

### `src/handlers/user_commands.py`

–≠—Ç–æ—Ç –º–æ–¥—É–ª—å –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –ø–µ—Ä–≤–∏—á–Ω—É—é —Ç–æ—á–∫—É –≤—Ö–æ–¥–∞ –∏ –æ–±—â—É—é –Ω–∞–≤–∏–≥–∞—Ü–∏—é:

* –ö–æ–º–∞–Ω–¥—ã `/start` –∏ `/menu`: —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –µ–≥–æ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö (`db.add_user`), –µ—Å–ª–∏ –æ–Ω –Ω–æ–≤—ã–π, –∏ –≤—ã–≤–æ–¥–∏—Ç **–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é**.
* –§—É–Ω–∫—Ü–∏—è `set_bot_commands`: —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞ (`/start`, `/menu`, `/progress`) –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ Telegram.
* –û–±—Ä–∞–±–æ—Ç–∫–∞ `CALLBACK_BACK_TO_MAIN`: –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤–æ–∑–≤—Ä–∞—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –ª—é–±–æ–≥–æ –ø–æ–¥—Ä–∞–∑–¥–µ–ª–∞ –æ–±—Ä–∞—Ç–Ω–æ –≤ **–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é**.

### `src/handlers/progress_handler.py`

–≠—Ç–æ—Ç –º–æ–¥—É–ª—å –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–±–æ—Ä –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –æ–±—É—á–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

* –ö–æ–º–∞–Ω–¥–∞ `/progress`: —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ (—Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤–æ–π –∫–æ–º–∞–Ω–¥—ã, —Ç–∞–∫ –∏ –¥–ª—è `callback_query` —Å `CALLBACK_PROGRESS`).
* –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–µ—Ç–æ–¥ `db.get_user_progress()` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –æ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö —Å–∫–∞–∑–∫–∞—Ö, –æ–±—â–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –ø—Ä–æ—á—Ç–µ–Ω–∏–π –∏ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—è—Ö.
* –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç —á–∏—Ç–∞–±–µ–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç –≤ **HTML-—Ñ–æ—Ä–º–∞—Ç–µ**, –≤–∫–ª—é—á–∞—è —Å—Ç–∞—Ç—É—Å –∑–∞–≤–µ—Ä—à—ë–Ω–Ω–æ—Å—Ç–∏ —Å–∫–∞–∑–æ–∫ –∏ –¥–∞—Ç—ã –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø—Ä–æ—á—Ç–µ–Ω–∏—è.


### `src/middleware/dependencies.py`

–†–µ–∞–ª–∏–∑—É–µ—Ç DependencyMiddleware (–ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–µ –ü–û):

* –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (Dependency Injection).
* –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ —Ç–∞–∫–∏–µ –æ–±—ä–µ–∫—Ç—ã, –∫–∞–∫ —ç–∫–∑–µ–º–ø–ª—è—Ä Database –∏ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (tales_data), –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –≤–æ –≤—Å–µ—Ö —Ö–µ–Ω–¥–ª–µ—Ä–∞—Ö.


### `src/services/classifier.py`

–†–µ–∞–ª–∏–∑—É–µ—Ç **–≥–∏–±—Ä–∏–¥–Ω—ã–π —Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä**:

* `HybridThemeClassifier` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–Ω–∞—á–∞–ª–∞ `smart_dict_search` (—Ä—É—á–Ω–æ–π —Å–ª–æ–≤–∞—Ä—å) –∏, –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π, –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ **–Ω–µ–π—Ä–æ—Å–µ—Ç–µ–≤–æ–π –º–æ–¥–µ–ª–∏** (`MultiLabelClassifier`) –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–µ–º–∞—Ç–∏–∫–∏ —Å–ª–æ–≤–∞.
* –û—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –Ω–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–ª–æ–≤–∞—Ä–∏–∫–∞ —Ç–µ–º–∞–º–∏ –∏–∑ —Å–∫–∞–∑–æ–∫.

### `src/utils/helpers.py`

–í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (—Å–∂–∞—Ç–∏–µ/–∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, —Ä–∞–∑–±–∏–≤–∫–∞ –¥–ª–∏–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π):

* `split_long_message` —Ä–∞–∑–±–∏–≤–∞–µ—Ç –¥–ª–∏–Ω–Ω—ã–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –ª–∏–º–∏—Ç—É Telegram.
* `compress_image` —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–æ–≥–∏–∫—É –¥–ª—è —Å–∂–∞—Ç–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π.
* `preload_images` –∫–ª—é—á–µ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫—ç—à–∞. –û–Ω–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ main.py –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –¥–ª—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–π –≤ image_cache.
* `image_cache` –≥–ª–æ–±–∞–ª—å–Ω—ã–π —Å–ª–æ–≤–∞—Ä—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö (—Å–∂–∞—Ç—ã—Ö) –±–∞–π—Ç–æ–≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏.
* `–¢–∞–∫–∂–µ –≤–∫–ª—é—á–∞–µ—Ç –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, —Ç–∞–∫–∏–µ –∫–∞–∫ show_illustrations, –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–π —Å–∫–∞–∑–æ–∫.

### `src/utils/keyboards.py`

–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `build_menu` + –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –∫–ª–∞–≤–∏–∞—Ç—É—Ä:

* `build_menu` - **—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä** (buttons + back + –Ω–∞–≤–∏–≥–∞—Ü–∏—è, columns=2)
* `main_menu_kb()` - –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é (–°–∫–∞–∑–∫–∏/–°–ª–æ–≤–∞—Ä—å/–ü—Ä–æ–≥—Ä–µ—Å—Å)
* `lexicon_menu_kb(all_themes, page, page_size=6)` - **–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –ø–∞–≥–∏–Ω–∞—Ü–∏—è** –ø–æ —Ç–µ–º–∞–º –ª–µ–∫—Å–∏–∫–∏
* `tales_menu_kb(page=0, page_size=5)` - –ø–∞–≥–∏–Ω–∞—Ü–∏—è —Å–∫–∞–∑–æ–∫ (5/—Å—Ç—Ä–∞–Ω–∏—Ü–∞)
* `story_menu_kb(story_id)` - **–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∫–Ω–æ–ø–∫–∏** (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–æ—Å—Ç—É–ø–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç: –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–∏/–∞—É–¥–∏–æ/–≥—Ä–∞–º–º–∞—Ç–∏–∫–∞/–ª–µ–∫—Å–∏–∫–∞/—Ç–µ—Å—Ç/–∫—É–ª—å—Ç—É—Ä–∞)
* `language_menu_kb(story_id)` - –≤—ã–±–æ—Ä RU/KH –¥–ª—è —Å–∫–∞–∑–∫–∏
* `alphabet_menu_kb()` - –∞–ª—Ñ–∞–≤–∏—Ç (–±—É–∫–≤—ã/–≥–ª–∞—Å–Ω—ã–µ/—Å–æ–≥–ª–∞—Å–Ω—ã–µ)
* `get_alphabet_buttons()` - –∫–Ω–æ–ø–∫–∏ –±—É–∫–≤ –∏–∑ `alphabet.json`
